function hasRole(e){return localStorage.getItem("userRole")===e}function logout(){localStorage.removeItem("token"),localStorage.removeItem("userRole"),window.location.href="../pages/login.html"}document.addEventListener("DOMContentLoaded",()=>{var e=localStorage.getItem("token"),o=localStorage.getItem("userRole"),t=window.location.pathname.split("/").pop(),a={"admin-dashboard.html":"admin","dashboard.html":"user"};a[t]&&(e?"admin-dashboard.html"===t&&"admin"!==o?(alert("Access denied. Admin privileges required."),window.location.href="../pages/dashboard.html"):(async e=>{try{["localhost","127.0.0.1"].includes(window.location.hostname);(await fetch("https://jefitness.onrender.com/api/auth/me",{headers:{Authorization:"Bearer "+e}})).ok||(localStorage.removeItem("token"),localStorage.removeItem("userRole"),window.location.href="../pages/login.html")}catch(e){console.error("Token verification failed:",e),localStorage.removeItem("token"),localStorage.removeItem("userRole"),window.location.href="../pages/login.html"}})(e):window.location.href="../pages/login.html")});